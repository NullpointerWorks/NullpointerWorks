<!DOCTYPE html>
<html lang="en-US">
	<head>
		<title>ARGB Controller V2 | Nullpointer Works</title>
		<meta charset="utf-8"/>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="description" content="Nullpointer Works Portfolio Intro" />
		<meta name="keywords" content="argb,controller,null*,nullpointer,works,nullpointerworks" />
		<meta name="author" content="Michiel Drost" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" type="text/css" href="argb-control-v2.css" />
		<link rel="stylesheet" href="lib/vs2015.css" />
	</head>
	<body>
		<div class="content">
			
			<div></div>
			
			
			
			<!--  -->
			<div class="chapter">
				<a id="intro" href="#intro"><img style="width: 20px;" src="img/star.svg" /></a>Introduction
			</div>
			<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum</p>
			
			
			
			<!--  -->
			<div class="chapter">
				<a id="design" href="#design"><img style="width: 20px;" src="img/star.svg" /></a>Design
			</div>
			<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum</p>
			
			<img src="img/argb_fan_800.png" class="content_image"></img>
			
			<!--  -->
			<div class="chapter">
				<a id="code" href="#code"><img style="width: 20px;" src="img/star.svg" /></a>Code
			</div>
			<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum</p>
			
			<div class="codeblock">
				<pre><code class="cpp">#include &lt;FastLED.h&gt;

#include "Palette.hpp"
#include "PaletteOffMode.hpp"
#include "PaletteRainbow.hpp"
#include "PaletteSoftRainbow.hpp"

#include "Behavior.hpp"
#include "BehaviorRevolver.hpp"
#include "BehaviorSpark.hpp"
#include "BehaviorStatic.hpp"

#include "Controller.hpp"

// pin configuration
#define SWITCH_P 2
#define ARGB_1 8
#define ARGB_2 9
#define ARGB_3 10
#define ARGB_4 11
#define ARGB_5 12
#define ARGB_6 13
#define ARGB_7 7
#define ARGB_8 6

// patterns and behaviors
#define OFFMODE 0
#define RAINBOW 1
#define SOFTRGB 2
#define NUM_PATTERNS 3
uint8_t pattern = OFFMODE;
Palette* offmode;
Palette* rainbow;
Palette* softrgb;
Behavior* bstatic;
Behavior* revolver;
Behavior* spark;

// RGB controllers
#define NUM_CONTROLLERS 8
Controller* controllers;

void setup() 
{
	offmode = new PaletteOffMode();
	rainbow = new PaletteRainbow();
	softrgb = new PaletteSoftRainbow();
	
	bstatic = new BehaviorStatic();
	revolver = new BehaviorRevolver();
	spark = new BehaviorSpark();
	
	controllers = new Controller[NUM_CONTROLLERS];
	FastLED.addLeds&lt;NEOPIXEL, ARGB_1&gt;(controllers[0].getLEDS(), 20);
	FastLED.addLeds&lt;NEOPIXEL, ARGB_2&gt;(controllers[1].getLEDS(), 20);
	FastLED.addLeds&lt;NEOPIXEL, ARGB_3&gt;(controllers[2].getLEDS(), 20);
	FastLED.addLeds&lt;NEOPIXEL, ARGB_4&gt;(controllers[3].getLEDS(), 20);
	FastLED.addLeds&lt;NEOPIXEL, ARGB_5&gt;(controllers[4].getLEDS(), 20);
	FastLED.addLeds&lt;NEOPIXEL, ARGB_6&gt;(controllers[5].getLEDS(), 20);
	FastLED.addLeds&lt;NEOPIXEL, ARGB_7&gt;(controllers[6].getLEDS(), 20);
	FastLED.addLeds&lt;NEOPIXEL, ARGB_8&gt;(controllers[7].getLEDS(), 20);
	
	attachInterrupt( digitalPinToInterrupt(SWITCH_P), setPatternISR, FALLING );
	update();
	delay(100); // pre-charge delay
}

void loop() 
{
	for (int i=0; i&lt;NUM_CONTROLLERS; i++)
	{
		controllers[i].doNextStep();
	}
	FastLED.show();
	delay(70);
}

void update()
{
	switch(pattern)
	{
	case RAINBOW:
		for (int i=0; i&lt;NUM_CONTROLLERS; i++)
		{
			controllers[i].setPalette( rainbow );
			controllers[i].setBehavior( revolver );
		}
		break;
		
	case SOFTRGB:
		for (int i=0; i&lt;NUM_CONTROLLERS; i++)
		{
			controllers[i].setPalette( softrgb );
			controllers[i].setBehavior( revolver );
		}
		break;
		
	case OFFMODE:
	default:
		for (int i=0; i&lt;NUM_CONTROLLERS; i++)
		{
			controllers[i].setPalette( offmode );
			controllers[i].setBehavior( bstatic );
		}
		break;
	}
}

// Interrupt Service Routine to swap NeoPixel patterns
void setPatternISR()
{
	pattern = (pattern+1) % NUM_PATTERNS;
	update();
}</code></pre>
			</div>
			
			
			
			
			
		</div>
	</body>
	<script type="text/javascript" src="argb-control-v2.js"></script>
	<script src="lib/highlight.pack.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>
</html>
